jQuery(document).ready(function(t){t("#edd-wl-modal").on("keypress","#list-name",function(t){return"13"==t.keyCode?!1:void 0}),t(".edd-no-js").hide(),t("a.edd-add-to-wish-list").addClass("edd-has-js"),t("body").on("click.eddAddToCartFromWishList",".edd-add-to-cart-from-wish-list",function(e){e.preventDefault();var d=t(this),a=d.closest("div"),i=t(this).find(".edd-loading"),s=i.width(),o=i.height();d.attr("data-edd-loading",""),i.css({"margin-left":s/-2,"margin-top":o/-2});var n=d.data("download-id"),l=d.data("variable-price"),r=d.data("price-option"),c=d.data("price-mode"),p=[];p[0]="yes"==l?r:n;var u=d.data("action"),h={action:u,download_id:n,price_ids:p,nonce:edd_scripts.ajax_nonce};return t.ajax({type:"POST",data:h,dataType:"json",url:edd_scripts.ajaxurl,success:function(e){t(".cart_item.empty").length?(t(e.cart_item).insertBefore(".cart_item.edd_subtotal"),t(".cart_item.edd_checkout, .cart_item.edd_subtotal").show(),t(".cart_item.empty").remove()):t(e.cart_item).insertBefore(".cart_item.edd_subtotal"),t(".cart_item.edd_subtotal span").html(e.subtotal),t("span.edd-cart-quantity").each(function(){var e=parseInt(t(this).text(),10)+1;t(this).text(e)}),"none"==t(".edd-cart-number-of-items").css("display")&&t(".edd-cart-number-of-items").show("slow"),t("a.edd-add-to-cart-from-wish-list",a).toggle(),t(".edd-go-to-checkout-from-wish-list",a).css("display","inline-block"),"incart"!=e&&(t(".edd-cart-added-alert",a).fadeIn(),setTimeout(function(){t(".edd-cart-added-alert",a).fadeOut()},3e3))}}).fail(function(t){console.log(t)}).done(function(t){}),!1}),t("body").on("click.eddRemoveFromWishList",".edd-remove-from-wish-list",function(e){e.preventDefault();var d=t(this),a=d.data("cart-item"),i=d.data("action"),s=d.data("download-id"),o=d.data("list-id"),n={action:i,cart_item:a,list_id:o,nonce:edd_scripts.ajax_nonce};return t.ajax({type:"POST",data:n,dataType:"json",url:edd_scripts.ajaxurl,success:function(e){if(e.removed){if(parseInt(edd_scripts.position_in_cart,10)===parseInt(a,10))return window.location=window.location,!1;e.message&&(t("ul.edd-wish-list").parent().prepend(e.message),t(".edd-wl-add-all-to-cart").parent().remove(),t(".edd-wl-sharing").remove());var d=t(".edd-wish-list").find("[data-cart-item='"+a+"']").closest(".wl-row");d?d.remove():t(".edd-wish-list").find("[data-cart-item='"+a+"']").parent().parent().remove()}}}).fail(function(t){console.log(t)}).done(function(t){}),!1}),t("body").on("click.eddwlOpenModal",".edd-wl-open-modal",function(e){e.preventDefault();var d=t(this),a=d.closest("form"),i=t(this).find(".edd-loading"),s=t(this).closest("div"),o=i.width(),n=i.height();t(this).attr("data-edd-loading",""),i.css({"margin-left":o/-2,"margin-top":n/-2});var a=jQuery(".edd_download_purchase_form"),l=d.data("download-id"),r=d.data("variable-price"),c=d.data("price-mode"),p=d.data("price-option"),u=[];if(p>=0)u[0]=p;else if("yes"==r){if(!t(".edd_price_option_"+l+":checked",a).length)return t(this).removeAttr("data-edd-loading"),void alert(edd_scripts.select_option);t(".edd_price_option_"+l+":checked",a).each(function(e){u[e]=t(this).val()})}else u[0]=l;var h={action:t(this).data("action"),post_id:t(this).data("download-id"),price_ids:u,nonce:edd_wl_scripts.ajax_nonce};p>=0&&(h.price_option_single=!0),t.ajax({type:"POST",data:h,dataType:"json",url:edd_scripts.ajaxurl,success:function(e){t("#edd-wl-modal .modal-content").html(e.lists),t(".edd-wl-open-modal").removeAttr("data-edd-loading"),t("a.edd-wl-open-modal").addClass("edd-has-js"),t(".edd-no-js").hide(),"new-list"===t("input:radio[name=list-options]:checked").val()||0===e.list_count?(t("#list-name").show(),t("#list-status").show(),t("#user-lists").hide(),t("input:radio[name=list-options]").prop("checked",!0)):(t("#list-name").hide(),t("#list-status").hide()),t("input:radio[name=list-options]").click(function(){"new-list"===t(this).attr("id")?(t("#list-name").show().focus(),t("#list-status").show(),t("#user-lists").hide()):(t("#list-name").hide(),t("#list-status").hide(),t("#user-lists").show())}),t("#edd-wl-modal").modal({backdrop:"static"})}}).fail(function(t){console.log(t)}).done(function(t){console.log(t)})}),t("body").on("click.eddAddToWishList",".edd-wl-save",function(e){e.preventDefault();var d=t(this).find(".edd-loading"),a=d.width(),i=d.height();t(this).attr("data-edd-loading",""),d.css({"margin-left":a/-2,"margin-top":i/-2});var s=t(this),o=s.closest("form"),o=jQuery(".edd_download_purchase_form"),n=s.data("download-id"),l=s.data("variable-price"),r=s.data("price-mode"),c=[],p=t("input[name=edd-wl-single-price-option]").val();if("yes"==p)c[0]=t("input[name=edd-wish-lists-post-id]").val();else if("yes"==l){if(!t(".edd_price_option_"+n+":checked",o).length)return t(this).removeAttr("data-edd-loading"),void alert(edd_scripts.select_option);t("input[name=edd-wish-lists-post-id]").each(function(e){c[e]=t(this).val()})}else c[0]=n;"existing-list"==jQuery("input:radio[name=list-options]:checked").val()&&(h=jQuery("#user-lists").val());var u=s.data("action"),h=h,m=jQuery("input[name=list-name]").val(),_=jQuery("select[name=list-status]").val(),f=jQuery("input:radio[name=list-options]:checked").val(),w={action:u,download_id:n,list_id:h,price_ids:c,new_or_existing:f,list_name:m,list_status:_,nonce:edd_scripts.ajax_nonce};return t.ajax({type:"POST",data:w,dataType:"json",url:edd_scripts.ajaxurl,success:function(e){t(".edd-wl-save").hide(),t(".edd-wl-success").show(),t(".modal-body").html(e.success),1==e.list_created&&t("#list-name").val(""),"1"==edd_wl_scripts.redirect_to_wish_list?window.location=edd_wl_scripts.wish_list_page:(t("span.edd-cart-quantity").each(function(){var e=parseInt(t(this).text(),10)+1;t(this).text(e)}),"multi"==r&&s.removeAttr("data-edd-loading"))}}).fail(function(t){console.log(t)}).done(function(t){}),!1})});