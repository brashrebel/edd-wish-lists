jQuery(document).ready(function($){$("#edd-wl-modal").on("keypress","#list-name",function(t){return"13"==t.keyCode?!1:void 0}),$(".edd-no-js").hide(),$("a.edd-add-to-wish-list").addClass("edd-has-js"),$("body").on("click.eddAddToCartFromWishList",".edd-add-to-cart-from-wish-list",function(t){t.preventDefault();var e=$(this),d=e.closest("div"),a=$(this).find(".edd-loading"),i=a.width(),s=a.height();e.attr("data-edd-loading",""),a.css({"margin-left":i/-2,"margin-top":s/-2});var o=e.data("download-id"),n=e.data("variable-price"),l=e.data("price-option"),r=e.data("price-mode"),c=[];c[0]="yes"==n?l:o;var p=e.data("action"),u={action:p,download_id:o,price_ids:c,nonce:edd_scripts.ajax_nonce};return $.ajax({type:"POST",data:u,dataType:"json",url:edd_scripts.ajaxurl,success:function(t){$(".cart_item.empty").length?($(t.cart_item).insertBefore(".cart_item.edd_subtotal"),$(".cart_item.edd_checkout, .cart_item.edd_subtotal").show(),$(".cart_item.empty").remove()):$(t.cart_item).insertBefore(".cart_item.edd_subtotal"),$(".cart_item.edd_subtotal span").html(t.subtotal),$("span.edd-cart-quantity").each(function(){var t=parseInt($(this).text(),10)+1;$(this).text(t)}),"none"==$(".edd-cart-number-of-items").css("display")&&$(".edd-cart-number-of-items").show("slow"),$("a.edd-add-to-cart-from-wish-list",d).toggle(),$(".edd-go-to-checkout-from-wish-list",d).css("display","inline-block"),"incart"!=t&&($(".edd-cart-added-alert",d).fadeIn(),setTimeout(function(){$(".edd-cart-added-alert",d).fadeOut()},3e3))}}).fail(function(t){console.log(t)}).done(function(t){}),!1}),$("body").on("click.eddRemoveFromWishList",".edd-remove-from-wish-list",function(t){t.preventDefault();var e=$(this),d=e.data("cart-item"),a=e.data("action"),i=e.data("download-id"),s=e.data("list-id"),o={action:a,cart_item:d,list_id:s,nonce:edd_scripts.ajax_nonce};return $.ajax({type:"POST",data:o,dataType:"json",url:edd_scripts.ajaxurl,success:function(t){if(t.removed){if(parseInt(edd_scripts.position_in_cart,10)===parseInt(d,10))return window.location=window.location,!1;t.message&&($("ul.edd-wish-list").parent().prepend(t.message),$(".edd-wl-add-all-to-cart").parent().remove(),$(".edd-wl-sharing").remove());var e=$(".edd-wish-list").find("[data-cart-item='"+d+"']").closest(".wl-row");e?e.remove():$(".edd-wish-list").find("[data-cart-item='"+d+"']").parent().parent().remove()}}}).fail(function(t){console.log(t)}).done(function(t){}),!1}),$("body").on("click.eddwlOpenModal",".edd-wl-open-modal",function(t){t.preventDefault();var e=$(this),d=e.closest("form"),a=$(this).find(".edd-loading"),i=$(this).closest("div"),s=a.width(),o=a.height();$(this).attr("data-edd-loading",""),a.css({"margin-left":s/-2,"margin-top":o/-2});var d=jQuery(".edd_download_purchase_form"),n=e.data("download-id"),l=e.data("variable-price"),r=e.data("price-mode"),c=e.data("price-option"),p=[];if(c>=0)p[0]=c;else if("yes"==l){if(!$(".edd_price_option_"+n+":checked",d).length)return $(this).removeAttr("data-edd-loading"),void alert(edd_scripts.select_option);$(".edd_price_option_"+n+":checked",d).each(function(t){p[t]=$(this).val()})}else p[0]=n;var u={action:$(this).data("action"),post_id:$(this).data("download-id"),price_ids:p,nonce:edd_wl_scripts.ajax_nonce};c>=0&&(u.price_option_single=!0),$.ajax({type:"POST",data:u,dataType:"json",url:edd_scripts.ajaxurl,success:function(t){$("#edd-wl-modal .modal-content").html(t.lists),$(".edd-wl-open-modal").removeAttr("data-edd-loading"),$("a.edd-wl-open-modal").addClass("edd-has-js"),$(".edd-no-js").hide(),"new-list"===$("input:radio[name=list-options]:checked").val()||0===t.list_count?($("#list-name").show(),$("#list-status").show(),$("#user-lists").hide(),$("input:radio[name=list-options]").prop("checked",!0)):($("#list-name").hide(),$("#list-status").hide()),$("input:radio[name=list-options]").click(function(){"new-list"===$(this).attr("id")?($("#list-name").show().focus(),$("#list-status").show(),$("#user-lists").hide()):($("#list-name").hide(),$("#list-status").hide(),$("#user-lists").show())}),$("#edd-wl-modal").modal({backdrop:"static"})}}).fail(function(t){console.log(t)}).done(function(t){console.log(t)})}),$("body").on("click.eddAddToWishList",".edd-wl-save",function(t){t.preventDefault();var e=$(this).find(".edd-loading"),d=e.width(),a=e.height();$(this).attr("data-edd-loading",""),e.css({"margin-left":d/-2,"margin-top":a/-2});var i=$(this),s=i.closest("form"),s=jQuery(".edd_download_purchase_form"),o=i.data("download-id"),n=i.data("variable-price"),l=i.data("price-mode"),r=[],c=$("input[name=edd-wl-single-price-option]").val();if("yes"==c)r[0]=$("input[name=edd-wish-lists-post-id]").val();else if("yes"==n){if(!$(".edd_price_option_"+o+":checked",s).length)return $(this).removeAttr("data-edd-loading"),void alert(edd_scripts.select_option);$("input[name=edd-wish-lists-post-id]").each(function(t){r[t]=$(this).val()})}else r[0]=o;"existing-list"==jQuery("input:radio[name=list-options]:checked").val()&&(u=jQuery("#user-lists").val());var p=i.data("action"),u=u,m=jQuery("input[name=list-name]").val(),h=jQuery("select[name=list-status]").val(),_=jQuery("input:radio[name=list-options]:checked").val(),f={action:p,download_id:o,list_id:u,price_ids:r,new_or_existing:_,list_name:m,list_status:h,nonce:edd_scripts.ajax_nonce};return $.ajax({type:"POST",data:f,dataType:"json",url:edd_scripts.ajaxurl,success:function(t){$(".edd-wl-save").hide(),$(".edd-wl-success").show(),$(".modal-body").html(t.success),1==t.list_created&&$("#list-name").val(""),"1"==edd_wl_scripts.redirect_to_wish_list?window.location=edd_wl_scripts.wish_list_page:"multi"==l&&i.removeAttr("data-edd-loading")}}).fail(function(t){console.log(t)}).done(function(t){}),!1})});